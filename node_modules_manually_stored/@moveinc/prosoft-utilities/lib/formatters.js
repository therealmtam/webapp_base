'use strict';

// error formatter according to company api response standards
var FormatError = function (err) {
    // setup the contact error object
    var error = {};
    error.errors = [];
    if (err.errors) {
        if (Array.isArray(err.errors)) {
            error.errors = [].concat(err.errors);
        } else {
            for (var key in err.errors) {
                if (err.errors[key]) {
                    var errorObject = {};
                    errorObject[key] = err.errors[key];
                    error.errors.push(errorObject);
                }
            }
        }
    } else {
        error.errors.push(err);
    }
    // if we are in debug mode and have a stack trace, include it
    if (process.env.STACK_TRACING === 'true' && err.stack) {
        error.stack = err.stack;
    }

    return error;
};

module.exports = {
    formatError: FormatError
};
